<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generated-by" content="Markdown PRO, http://markdownpro.com"/>
<title></title>
<style type="text/css">
html,body{margin:0;padding:0;}
body {padding: 20px}
h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,cite,code,del,dfn,em,img,q,s,samp,small,strike,strong,sub,sup,tt,var,dd,dl,dt,li,ol,ul,fieldset,form,label,legend,button,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;font-weight:normal;font-style:normal;font-size:100%;line-height:1;font-family:inherit;}
table{border-collapse:collapse;border-spacing:0;}
ol,ul{list-style:none;}
q:before,q:after,blockquote:before,blockquote:after{content:"";}
html{overflow-y:scroll;font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}
a:focus{outline:thin dotted;}
a:hover,a:active{outline:0;}
article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block;}
audio,canvas,video{display:inline-block;*display:inline;*zoom:1;}
audio:not([controls]){display:none;}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}
sup{top:-0.5em;}
sub{bottom:-0.25em;}
img{border:0;-ms-interpolation-mode:bicubic;}
button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle;}
button,input{line-height:normal;*overflow:visible;}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}
button,input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button;}
input[type="search"]{-webkit-appearance:textfield;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;}
input[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}
textarea{overflow:auto;vertical-align:top;}
html,body{background-color:#ffffff;}
body{margin:0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:13px;font-weight:normal;line-height:18px;color:#404040;}
.container{width:940px;margin-left:auto;margin-right:auto;zoom:1;}.container:before,.container:after{display:table;content:"";zoom:1;*display:inline;}
.container:after{clear:both;}
.container-fluid{position:relative;min-width:940px;padding-left:20px;padding-right:20px;zoom:1;}.container-fluid:before,.container-fluid:after{display:table;content:"";zoom:1;*display:inline;}
.container-fluid:after{clear:both;}
.container-fluid>.sidebar{float:left;width:220px;}
.container-fluid>.content{margin-left:240px;}
a{color:#0069d6;text-decoration:none;line-height:inherit;font-weight:inherit;}a:hover{color:#00438a;text-decoration:underline;}
.pull-right{float:right;}
.pull-left{float:left;}
.hide{display:none;}
.show{display:block;}
.row{zoom:1;margin-left:-20px;}.row:before,.row:after{display:table;content:"";zoom:1;*display:inline;}
.row:after{clear:both;}
p{font-size:13px;font-weight:normal;line-height:18px;margin-bottom:9px;}p small{font-size:11px;color:#bfbfbf;}
h1,h2,h3,h4,h5,h6{font-weight:bold;color:#404040;}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small{color:#bfbfbf;}
h1{margin-bottom:18px;font-size:30px;line-height:36px;}h1 small{font-size:18px;}
h2{font-size:24px;line-height:36px;}h2 small{font-size:14px;}
h3,h4,h5,h6{line-height:36px;}
h3{font-size:18px;}h3 small{font-size:14px;}
h4{font-size:16px;}h4 small{font-size:12px;}
h5{font-size:14px;}
h6{font-size:13px;color:#bfbfbf;text-transform:uppercase;}
ul,ol{margin:0 0 18px 25px;}
ul ul,ul ol,ol ol,ol ul{margin-bottom:0;}
ul{list-style:disc;}
ol{list-style:decimal;}
li{line-height:18px;color:#808080;}
ul.unstyled{list-style:none;margin-left:0;}
dl{margin-bottom:18px;}dl dt,dl dd{line-height:18px;}
dl dt{font-weight:bold;}
dl dd{margin-left:9px;}
hr{margin:20px 0 19px;border:0;border-bottom:1px solid #eee;}
strong{font-style:inherit;font-weight:bold;}
em{font-style:italic;font-weight:inherit;line-height:inherit;}
.muted{color:#bfbfbf;}
blockquote{margin-bottom:18px;border-left:5px solid #eee;padding-left:15px;}blockquote p{font-size:14px;font-weight:300;line-height:18px;margin-bottom:0;}
blockquote small{display:block;font-size:12px;font-weight:300;line-height:18px;color:#bfbfbf;}blockquote small:before{content:'\2014 \00A0';}
address{display:block;line-height:18px;margin-bottom:18px;}
code,pre{padding:0 3px 2px;font-family:Monaco, Andale Mono, Courier New, monospace;font-size:12px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;}
code{padding:1px 3px;}
pre{background-color:#f5f5f5;display:block;padding:8.5px;margin:0 0 18px;line-height:18px;font-size:12px;border:1px solid #ccc;border:1px solid rgba(0, 0, 0, 0.15);-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;white-space:pre;white-space:pre-wrap;word-wrap:break-word;}
form{margin-bottom:18px;}
fieldset{margin-bottom:18px;padding-top:18px;}fieldset legend{display:block;padding-left:150px;font-size:19.5px;line-height:1;color:#404040;*padding:0 0 5px 145px;*line-height:1.5;}
form .clearfix{margin-bottom:18px;zoom:1;}form .clearfix:before,form .clearfix:after{display:table;content:"";zoom:1;*display:inline;}
form .clearfix:after{clear:both;}
label,input,select,textarea{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:13px;font-weight:normal;line-height:normal;}
label{padding-top:6px;font-size:13px;line-height:18px;float:left;width:130px;text-align:right;color:#404040;}
form .input{margin-left:150px;}
input[type=checkbox],input[type=radio]{cursor:pointer;}
input,textarea,select,.uneditable-input{display:inline-block;width:210px;height:18px;padding:4px;font-size:13px;line-height:18px;color:#808080;border:1px solid #ccc;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;}
input[type=checkbox],input[type=radio]{width:auto;height:auto;padding:0;margin:3px 0;*margin-top:0;line-height:normal;border:none;}
input[type=file]{background-color:#ffffff;padding:initial;border:initial;line-height:initial;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;}
input[type=button],input[type=reset],input[type=submit]{width:auto;height:auto;}
select,input[type=file]{height:27px;line-height:27px;*margin-top:4px;}
select[multiple]{height:inherit;}
textarea{height:auto;}
.uneditable-input{background-color:#ffffff;display:block;border-color:#eee;-webkit-box-shadow:inset 0 1px 2px rgba(0, 0, 0, 0.025);-moz-box-shadow:inset 0 1px 2px rgba(0, 0, 0, 0.025);box-shadow:inset 0 1px 2px rgba(0, 0, 0, 0.025);cursor:not-allowed;}
:-moz-placeholder{color:#bfbfbf;}
::-webkit-input-placeholder{color:#bfbfbf;}
input,textarea{-webkit-transition:border linear 0.2s,box-shadow linear 0.2s;-moz-transition:border linear 0.2s,box-shadow linear 0.2s;-ms-transition:border linear 0.2s,box-shadow linear 0.2s;-o-transition:border linear 0.2s,box-shadow linear 0.2s;transition:border linear 0.2s,box-shadow linear 0.2s;-webkit-box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1);-moz-box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1);box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1);}
input:focus,textarea:focus{outline:0;border-color:rgba(82, 168, 236, 0.8);-webkit-box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1),0 0 8px rgba(82, 168, 236, 0.6);-moz-box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1),0 0 8px rgba(82, 168, 236, 0.6);box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.1),0 0 8px rgba(82, 168, 236, 0.6);}
input[type=file]:focus,input[type=checkbox]:focus,select:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;outline:1px dotted #666;}
form div.clearfix.error{background:#fae5e3;padding:10px 0;margin:-10px 0 10px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}form div.clearfix.error>label,form div.clearfix.error span.help-inline,form div.clearfix.error span.help-block{color:#9d261d;}
form div.clearfix.error input,form div.clearfix.error textarea{border-color:#c87872;-webkit-box-shadow:0 0 3px rgba(171, 41, 32, 0.25);-moz-box-shadow:0 0 3px rgba(171, 41, 32, 0.25);box-shadow:0 0 3px rgba(171, 41, 32, 0.25);}form div.clearfix.error input:focus,form div.clearfix.error textarea:focus{border-color:#b9554d;-webkit-box-shadow:0 0 6px rgba(171, 41, 32, 0.5);-moz-box-shadow:0 0 6px rgba(171, 41, 32, 0.5);box-shadow:0 0 6px rgba(171, 41, 32, 0.5);}
form div.clearfix.error .input-prepend span.add-on,form div.clearfix.error .input-append span.add-on{background:#f4c8c5;border-color:#c87872;color:#b9554d;}
table{width:100%;margin-bottom:18px;padding:0;border-collapse:separate;*border-collapse:collapse;font-size:13px;border:1px solid #ddd;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}table th,table td{padding:10px 10px 9px;line-height:18px;text-align:left;}
table th{padding-top:9px;font-weight:bold;vertical-align:middle;border-bottom:1px solid #ddd;}
table td{vertical-align:top;}
table th+th,table td+td{border-left:1px solid #ddd;}
table tr+tr td{border-top:1px solid #ddd;}
table tbody tr:first-child td:first-child{-webkit-border-radius:4px 0 0 0;-moz-border-radius:4px 0 0 0;border-radius:4px 0 0 0;}
table tbody tr:first-child td:last-child{-webkit-border-radius:0 4px 0 0;-moz-border-radius:0 4px 0 0;border-radius:0 4px 0 0;}
table tbody tr:last-child td:first-child{-webkit-border-radius:0 0 0 4px;-moz-border-radius:0 0 0 4px;border-radius:0 0 0 4px;}
table tbody tr:last-child td:last-child{-webkit-border-radius:0 0 4px 0;-moz-border-radius:0 0 4px 0;border-radius:0 0 4px 0;}
.zebra-striped tbody tr:nth-child(odd) td{background-color:#f9f9f9;}
.zebra-striped tbody tr:hover td{background-color:#f5f5f5;}
.zebra-striped .header{cursor:pointer;}.zebra-striped .header:after{content:"";float:right;margin-top:7px;border-width:0 4px 4px;border-style:solid;border-color:#000 transparent;visibility:hidden;}
.zebra-striped .header:hover:after{visibility:visible;}
footer{margin-top:17px;padding-top:17px;border-top:1px solid #eee;}
.page-header{margin-bottom:17px;border-bottom:1px solid #ddd;-webkit-box-shadow:0 1px 0 rgba(255, 255, 255, 0.5);-moz-box-shadow:0 1px 0 rgba(255, 255, 255, 0.5);box-shadow:0 1px 0 rgba(255, 255, 255, 0.5);}.page-header h1{margin-bottom:8px;}
.close{float:right;color:#000000;font-size:20px;font-weight:bold;line-height:13.5px;text-shadow:0 1px 0 #ffffff;filter:alpha(opacity=20);-khtml-opacity:0.2;-moz-opacity:0.2;opacity:0.2;}.close:hover{color:#000000;text-decoration:none;filter:alpha(opacity=40);-khtml-opacity:0.4;-moz-opacity:0.4;opacity:0.4;}

pre {
	padding: 0;
	margin: 10px 0px 10px;
	overflow: auto; /*--If the Code exceeds the width, a scrolling is available--*/
	overflow-Y: hidden;  /*--Hides vertical scroll created by IE--*/
}
pre code {
	margin: 5px;  /*--Left Margin--*/
	padding: 0px;
	display: block;
    line-height: 18px;
}
.center { text-align:center}
.left {text-align:left}
.right {text-align:right}

</style><style type="text/css">
body {
	font-family: "Geneva", Arial, sans-serif;
	font-size: 13px;
	margin: 10px;
}

a, a:visited {
	color: #09c;
}

a:hover {
	color: #336699;
	text-decoration: none;
}

h1 {
	margin: 0px 0px 10px;	
	font-weight: bold;
}

h2 {
	border-bottom: 2px dotted #ccc;
	margin: 5px 0px 15px;	
}

h6 {
	color: #09c;
}

blockquote {
	font-family: "Georgia", Courier New, courier, sans-serif;
	background: #efefef;
	padding: 5px 10px;
	border: solid 1px #ddd;
	margin: 15px;
	-webkit-border-radius:6px;
	-moz-border-radius:6px;
	border-radius:6px;
	color:  #333;
	
}

ul, ol {
	margin-bottom: 15px;
}

li {
	padding: 3px;
}



code {
	background-color: #f1f1f1;
    color: #336699;
}

pre {
	background-color: #f1f1f1;
}

pre > code {
	margin: 0px;
	padding: 5px;
	border: 0px;
	background-color: #f1f1f1;
}


</style></head>
<body>
<h1>深入JVM的Class文件结构</h1>

<p>Class文件由顺序的8位字节为基础单位构成的二进制流。各个项目严格按照顺序紧凑排列，无分隔符。</p>

<p>需要用8位字节以上空间数据项时按照高位在前分割成若干个8位字节存储。</p>

<p>只包含2种数据类型：</p>

<ul>
<li>无符号数</li>
<li>表</li>
</ul>

<h2>无符号数</h2>

<p>是class文件基本数据类型，以u1,u2,u4,u8分别代表1个字节，2个，4个，8个字节的无符号数。可以用来描述数字、索引引用、数量值、以UTF-8编码构成的字符串。</p>

<h2>表</h2>

<p>由多个无符号数或其他表作为数据项构成的复合数据类型。所有表以“_info”结尾。用来描述具有层次关系的复合结构数据。</p>

<p>其实class文件本质上就是一张表。</p>

<h2>Class文件结构</h2>

<p>包含magic魔数，文件版本,常量池，访问标识，类索引、父类索引与接口索引集合，字段表集合，方法表集合，属性表集合等构成</p>

<h3>魔数</h3>

<p>在class文件头4个字节，magic number。
作用：确定该文件是否是虚拟机可接受的class文件。java的魔数统一为 0xCAFEBABE  (来源于一款咖啡)。</p>

<h3>版本号</h3>

<p>由minor<em>version和major</em>version组成，占用文件中第5到8字节。
如<br>
CA FE BA BE 00 00 00 32 
 表示此版本号为50.0，十进制表示一般格式为 major.minor
需要注意的是java版本号是从45开始的，大版本发布，主版本号+1.高版本的jdk能向下兼容以前版本的class文件，但不兼容以后版本的class文件。</p>

<p>各jdk编译后的class文件版本号如下：</p>

<p><img src="images/class-version.png" alt="class-version.png"></p>

<h3>常量池</h3>

<p>紧接着版本号后就是常量池入口。是第一个出现的表类型的数据项目。
由常量池容量计数值constant_pool_count及常量池constant_pool组成。
constant_pool_count占2个字节。如 0x0016 即十进制的22，表示有21项常量，从1开始到21.<br>
0有特殊含义，表示指向常量池的索引值数据<strong>不引用</strong>任何一个常量池项目。</p>

<p>常量池主要存放字面量Literal和符号引用Symbolic References。</p>

<p>字面量可能是文本字符串，或final的常量值。
符号引用包括以下：</p>

<ul>
<li>类或接口全限定名 Full Qualified Name</li>
<li>字段名称和描述符 Descriptor</li>
<li>方法名称和描述符</li>
</ul>

<p>常量池共有11种表结构数据。</p>

<p><img src="images/class-constants.png" alt="class-constants.png"></p>

<p>每个表均开始的第一位是u1类型的标志位，表示哪种常量类型。但每个表的结构都不相同。
如类或接口的符号引用为CONSTANT<em>Class</em>info.</p>

<p>所有的常量池结构严格以标志位，表结构其他数据类型 顺序排列。
各类型常量池表结构如下表所示：</p>

<p><img src="images/class-constant-structure.png" alt="class-constant-structure.png"></p>

<p>实际中可以使用 javap -verbose  XXX.class  输出字节码内容。</p>

<h3>访问标志access_flags</h3>

<p>u2类型,识别类或接口层次的访问信息，如class是接口或类，是否public，是否abstract，是否final等。</p>

<p><img src="images/class_access_flags.png" alt="class_access_flags.png"></p>

<h3>类索引、父类索引与接口索引集合</h3>

<p>类索引this_class及父类索引super_class均是u2类型，接口索引集合interfaces是一组u2类型的集合。确定类的继承关系.按照顺序排列在访问标志之后。this_class,super_class指向CONSTANT_CLASS_info常量。通过该常量可以找到定义在CONSTANT_Utf8_info的全限定名字符串。</p>

<h3>字段表集合field_info</h3>

<p>紧接在interface后面的是fields<em>count的计数，它是类变量和实例变量的字段的数量总和。在这个计数后面的是不同长度的field</em>info表的序列(fields<em>count指出了序列中有多少个field</em>info表)。</p>

<p>描述接口或类中声明的变量，包含类级变量或实例级变量，不包含方法变量。信息包含：字段作用域、字段类型（类变量还是实例变量 static）、可变性（final）、并发可见性（volatile）、可否序列化（transient）、字段数据类型、名称等。
结构如下表：
<img src="images/class-fields.jpg" alt="class-fields.jpg"></p>

<p>字段修饰符放在access<em>flags项目中，它与类中的access</em>flags项目是非常相似的，都是一个u2的数据类型，其中可以设置 的标志位和含义如下表所示
<img src="images/class_field_access_flags.jpg" alt="class_field_access_flags.jpg"></p>

<p>name<em>index和descriptor</em>index都是对常量池的引用，分别代表着字段的简单名称及字段和方法的描述符.其中描述符的作用是用来描述字段的数据类型、方法的参数列表（包括数量、类型以及顺序）和返回值。根据描述符规则，基本数据类型(byte、char、double、float、int、long、short、boolean)及代表无返回值的void类型都用一个大写字符来表示，而对象类型则用字符L加对象的全限定名来表示。
<img src="images/class_field_desc.jpg" alt="class_field_desc.jpg"></p>

<p>对于数组类型，每一个维度将使用一个前置的&quot;[&quot;字符来描述，如一个定义的&quot;java.lang.String[][]&quot;类型的二维数组，将被记录为:&quot;[[Ljava/lang/String;&quot;,一个整型数组&quot;int[]&quot;将被记录为&quot;[I&quot;</p>

<p>用描述符来描述方法时，按照<strong>先参数列表，后返回值</strong>的顺序描述，参数列表按照参数的严格顺序放在一组小括号&quot;()&quot;之内。如方法void inc()的描述符为&quot;()V&quot;，方法java.lang.String.toString()的描述符为&quot;()Ljava/lang/String;&quot;。int IndexOf(char[] source,int sourceOffset,int sourceCount,char[] target int targetOffset,int targetCount,int fromIndex) 表示为([CII[CII)I.</p>

<p>在后面是attributes_count和attributes,分别表示属性计数器和属性信息，用来表示字段的额外属性，如果属性计数器为0，表示无额外属性。如 </p>

<p><em>final static int m=500;</em></p>

<p>此时attributes_count为1，表示有1个属性，属性ConstantValue指向常量池中得常量500.
   字段表集合不会列出从超类或父接口中继承来的字段，但可能包含原代码中不存在的字段，如内部类中为了保持对外部类的访问性，会自动添加指向外部类的字段。</p>

<p>java中类变量或实例变量不能重名，但在字节码中，只要描述符不一致，字段重名也是合法的。</p>

<h3>方法表集合methods_info</h3>

<p>紧接着field后面的是对在该类或者接口中所声明的方法的描述。其结构与fields一样，不一样的是访问标志。
   <img src="images/class_method_accessflags.jpg" alt="class_method_accessflags.jpg">
   访问标志中没有了ACC<em>VOLATILE和ACC</em>TRANSIENT标志。增加了ACC<em>SYNCHRONIZED,ACC</em>NATIVE,ACC<em>STRICTFP,ACC</em>ABSTRAT.</p>

<p><em>附：strictfp（strict float point (精确浮点)）用法</em></p>

<p><em>strictfp 关键字可应用于类、接口或方法。使用 strictfp 关键字声明一个方法时，该方法中所有的float和double表达式都严格遵守FP-strict的限制,符合IEEE-754规范。当对一个类或接口使用 strictfp 关键字时，该类中的所有代码，包括嵌套类型中的初始设定值和代码，都将严格地进行计算。严格约束意味着所有表达式的结果都必须是 IEEE 754 算法对操作数预期的结果，以单精度和双精度格式表示。</em></p>

<p>方法里的代码经过编译器编译成字节码指令之后，存放在方法属性表集合中Code得属性里面。</p>

<p>另外如果父类方法在子类中没有被重写（Override）,方法表集合就不会出现来自父类的方法信息。同时，也可能出现编译器自动添加的方法，如类构造器<clinit>和实例构造器<init>方法。</p>

<p>java中方法都有一个特征签名，指的就是一个方法中各参数在常量池中字段符号引用的集合。这里并不包含返回值，所以java中重载不能仅仅依靠返回值不同。<strong>但对于class文件，只要描述符不同的方法就可以共存在一个class文件中，所以两个方法有相同的名称和特征签名，但返回值不同，在class文件中可以共存</strong>。</p>

<h3>属性表集合attribute_info</h3>

<p>class文件中最后的部分是属性，它给出了在该文件类或者接口所定义的属性的基本信息。属性部分由attributes<em>count开始，attributes</em>count是指出现在后续attributes列表的attribute<em>info表的数量总和。每个attribute</em>info的第一项是指向常量池中CONSTANT<em>Utf8</em>info表的引用，该表给出了属性的名称。</p>

<p>属性表用来表示专用场景的专有信息，比如前面的字段表、方法表都有自己的属性信息。这里不要求严格的顺序，只要不与已有属性名重复，任何人实现的编译器都可以向属性表写入自定义的属性信息。jvm运行时会忽略掉不认别的属性。</p>

<p>《Java虚拟机规范(第2版)》预定义了9项属性。
<img src="images/class_9attribes.jpg" alt="class_9attribes.jpg"></p>

<p>每个属性的名称需要从常量池中引用一个CONSTANT<em>Utf8</em>info类型的常量表示。属性值结构完全自定义，只要说明属性值占用的位数长度即可。</p>

<table><thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>数量</th>
</tr>
</thead><tbody>
<tr>
<td>u2</td>
<td>attribute<em>name</em>index</td>
<td>1</td>
</tr>
<tr>
<td>u2</td>
<td>attribute_length</td>
<td>1</td>
</tr>
<tr>
<td>u1</td>
<td>info</td>
<td>attribute_length</td>
</tr>
</tbody></table>

<h4>Code属性</h4>

<p><img src="images/class_code.png" alt="class_code.png"></p>

<p>其中max_stack表示操作数栈（operand stacks）深度最大值，jvm根据该值分配栈帧Frame中操作栈深度。</p>

<p>max_locals表示局部变量表所需存储空间。单位是Slot，虚拟机为局部变量分配内存的最小单位。对byte、char,float,int,short,boolean,reference,returnAddress等长度不超过32位的数据类型，占用1Slot.而double,long类型需要2Slot。</p>

<p>方法中的局部变量表存放的包括实例方法隐藏参数this，显示异常处理的参数（ExceptionHandler Parameter），方法体中用的局部变量等。同时局部变量表中得Slot可以重用，编译器根据变量作用域来分类Slot，并分配给各变量使用，然后计算max_locals。</p>

<p>code和code_length存储字节码指令。每个指令为u1类型的单字节，取值范围为0x00~0xFF,十进制的0~255.既可以表达256个指令。目前jvm定义了约200条编码值对应的指令含义。部分指令码含义摘录如下：
<img src="images/class_code_table.jpg" alt="class_code_table.jpg"></p>

<p>另外code_length是u4类型的长度值，理论上最大值可以是2<sup>32-1，但jvm规范规定一个方法不允许超过65535条，否则编译器会拒绝编译。</sup></p>

</body>
</html>